{% extends 'base.html' %}
{% block title %}Link Analytics{% endblock title %}
{% block content %}
{% if current_user.is_authenticated %}
  {% if link %}
    <section class="container analytics-container">
      <div class="card analytics-card">
        <div class="card-body">
          <img class="card-qrcode" src="{{ url_for('generate_qr_code_link', short_url=link.short_url) }}" alt="QR Code">
          <br>
          <a href="{{ url_for('generate_qr_code_link', short_url=link.short_url) }}" download="qrcode image">
            <button class="btn btn-primary">Download QR Code</button>
          </a>
          <hr>
          <small>
            Created: {{link.created_at.strftime('%B %d, %Y')}} || Clicks: {{link.clicks}}
          </small>
          <p>
            Original Link: <br>
            <a href="{{link.long_url}}" target="_blank">{{link.long_url}}</a>
          </p>
          <p>
            Shortened Link: <br>
            <a href="{{url_for('redirect_link', short_url=link.short_url)}}" target="_blank">{{host}}{{link.short_url}}</a>
          </p>
          <a href="{{ url_for('update', short_url=link.short_url) }}">
            <button class="btn btn-secondary">Edit Link</button>
          </a>
          <a href="{{ url_for('delete', short_url=link.short_url) }}">
            <button class="btn btn-danger">Delete Link</button>
          </a>
        </div>
      </div>
    </section>
  {% else %}
    <small>
      This link does not exist (yet). <a href="{{url_for('index')}}">Create One</a>
    </small>
  {% endif %}
{% else %}
  <small>
    <a href="{{url_for('login')}}">Log in</a> to see link stats
  </small>
{% endif %}
{% endblock content %}
